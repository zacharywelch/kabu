/*! cb-design-framework 30-12-2014 */
+function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.alert");data||$this.data("bs.alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})}var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){function removeElement(){$parent.detach().trigger("closed.bs.alert").remove()}var $this=$(this),selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=$(selector);e&&e.preventDefault(),$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent()),$parent.trigger(e=$.Event("close.bs.alert")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.one($.support.transition.end,removeElement).emulateTransitionEnd(150):removeElement())};var old=$.fn.alert;$.fn.alert=Plugin,$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery),+function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.button"),options="object"==typeof option&&option;data||$this.data("bs.button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)})}var Button=function(element,options){this.$element=$(element),this.options=$.extend({},Button.DEFAULTS,options),this.isLoading=!1};Button.DEFAULTS={loadingText:"loading..."},Button.prototype.setState=function(state){var d="disabled",$el=this.$element,val=$el.is("input")?"val":"html",data=$el.data();state+="Text",null==data.resetText&&$el.data("resetText",$el[val]()),$el[val](null==data[state]?this.options[state]:data[state]),setTimeout($.proxy(function(){"loadingText"==state?(this.isLoading=!0,$el.addClass(d).attr(d,d)):this.isLoading&&(this.isLoading=!1,$el.removeClass(d).removeAttr(d))},this),0)},Button.prototype.toggle=function(){var changed=!0,$parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input");"radio"==$input.prop("type")&&($input.prop("checked")&&this.$element.hasClass("active")?changed=!1:$parent.find(".active").removeClass("active")),changed&&$input.prop("checked",!this.$element.hasClass("active")).trigger("change")}changed&&this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=Plugin,$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),Plugin.call($btn,"toggle"),e.preventDefault()})}(jQuery),function(){$(function(){$('input[data-toggle="clear"]').each(function(){$input=$(this),$clear=$("<i></i>").addClass("icon icon-remove-sign clear").click(function(){$input.val("").focus(),$(this).hide()}),$input.after($clear),$input.keyup(function(){$clear.toggle(Boolean($input.val()))}),$clear.toggle(Boolean($input.val()))})})}.call(this),+function($){"use strict";function clearMenus(e){e&&3===e.which||($(backdrop).remove(),$(toggle).each(function(){var $parent=getParent($(this)),relatedTarget={relatedTarget:this};$parent.hasClass("open")&&($parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget)),e.isDefaultPrevented()||$parent.removeClass("open").trigger("hidden.bs.dropdown",relatedTarget))}))}function getParent($this){var selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.dropdown");data||$this.data("bs.dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})}var backdrop=".dropdown-backdrop",toggle='[data-toggle="dropdown"]',Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.prototype.toggle=function(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(clearMenus(),!isActive){"ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on("click",clearMenus);var relatedTarget={relatedTarget:this};if($parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget)),e.isDefaultPrevented())return;$this.trigger("focus"),$parent.toggleClass("open").trigger("shown.bs.dropdown",relatedTarget)}return!1}},Dropdown.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var $this=$(this);if(e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(!isActive||isActive&&27==e.keyCode)return 27==e.which&&$parent.find(toggle).trigger("focus"),$this.trigger("click");var desc=" li:not(.divider):visible a",$items=$parent.find('[role="menu"]'+desc+', [role="listbox"]'+desc);if($items.length){var index=$items.index($items.filter(":focus"));38==e.keyCode&&index>0&&index--,40==e.keyCode&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).trigger("focus")}}}};var old=$.fn.dropdown;$.fn.dropdown=Plugin,$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle+', [role="menu"], [role="listbox"]',Dropdown.prototype.keydown)}(jQuery),+function($){"use strict";var isIE="Microsoft Internet Explorer"==window.navigator.appName,Fileupload=function(element,options){if(this.$element=$(element),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||options.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=$('<input type="hidden" />'),this.$element.prepend(this.$hidden)),this.$preview=this.$element.find(".fileinput-preview");var height=this.$preview.css("height");"inline"!=this.$preview.css("display")&&"0px"!=height&&"none"!=height&&this.$preview.css("line-height",height),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.inline_flag=this.$element.find(".input-group").length,this.inline_flag&&(this.$change=this.$element.find('[data-role="change"]'),this.$select_file=this.$element.find('[data-role="select-file"]')),this.listen()}};Fileupload.prototype.listen=function(){this.$input.on("change.bs.fileinput",$.proxy(this.change,this)),$(this.$input[0].form).on("reset.bs.fileinput",$.proxy(this.reset,this)),this.inline_flag&&this.$element.on("mousemove.bs.fileinput",$.proxy(this.checkmove,this)).on("mouseout.bs.fileinput",$.proxy(this.resetControlsClass,this)).on("mousedown.bs.fileinput",$.proxy(this.activateControls,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",$.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",$.proxy(this.clear,this))},Fileupload.prototype.change=function(e){if(void 0===e.target.files&&(e.target.files=e.target&&e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]),0!==e.target.files.length){this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var file=e.target.files[0];if(this.$preview.length>0&&("undefined"!=typeof file.type?file.type.match("image.*"):file.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var reader=new FileReader,preview=this.$preview,element=this.$element;reader.onload=function(re){var $img=$("<img>");$img[0].src=re.target.result,e.target.files[0].result=re.target.result,element.find(".fileinput-filename").text(file.name),"none"!=preview.css("max-height")&&$img.css("max-height",parseInt(preview.css("max-height"),10)-parseInt(preview.css("padding-top"),10)-parseInt(preview.css("padding-bottom"),10)-parseInt(preview.css("border-top"),10)-parseInt(preview.css("border-bottom"),10)),preview.html($img),element.addClass("fileinput-exists").removeClass("fileinput-new"),element.trigger("change.bs.fileinput",e.target.files)},reader.readAsDataURL(file)}else this.$element.find(".fileinput-filename").text(file.name),this.$preview.text(file.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")}},Fileupload.prototype.clear=function(e){if(e&&e.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),isIE){var inputClone=this.$input.clone(!0);this.$input.after(inputClone),this.$input.remove(),this.$input=inputClone}else this.$input.val("");this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),e!==!1&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},Fileupload.prototype.reset=function(){this.clear(!1),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},Fileupload.prototype.checkmove=function(e){var select_file_pos=this.$select_file.offset().left,change_pos=this.$change.offset().left;this.$change.is(":hidden")?e.pageX>select_file_pos&&e.pageX<select_file_pos+this.$select_file.width()?this.$select_file.addClass("hover"):this.$select_file.removeClass("hover"):e.pageX>change_pos&&e.pageX<change_pos+this.$select_file.width()?this.$change.addClass("hover"):this.$change.removeClass("hover")},Fileupload.prototype.activateControls=function(){this.$change.is(":hidden")?this.$select_file.addClass("active"):this.$change.addClass("active")},Fileupload.prototype.resetControlsClass=function(){this.$change.removeClass("hover active"),this.$select_file.removeClass("hover active")},Fileupload.prototype.trigger=function(e){this.$input.trigger("click"),e.preventDefault()},$.fn.fileinput=function(options){return this.each(function(){var $this=$(this),data=$this.data("fileinput");data||$this.data("fileinput",data=new Fileupload(this,options)),"string"==typeof options&&data[options]()})},$.fn.fileinput.Constructor=Fileupload,$(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(e){var $target=$(e.target).closest('[data-dismiss="fileinput"], [data-trigger="fileinput"]');$target.length>0&&e.preventDefault()}),$(function(){$('[data-provides="fileinput"]').each(function(){var $this=$(this);$this.data("fileinput")||$this.fileinput($this.data())})})}(window.jQuery),+function($){"use strict";function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this),data=$this.data("bs.modal"),options=$.extend({},Modal.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.modal",data=new Modal(this,options)),"string"==typeof option?data[option](_relatedTarget):options.show&&data.show(_relatedTarget)})}var Modal=function(element,options){this.options=options,this.$body=$(document.body),this.$element=$(element),this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};Modal.DEFAULTS={keyboard:!0,show:!0},Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)},Modal.prototype.show=function(_relatedTarget){var that=this,e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});if(this.$element.trigger(e),!this.isShown&&!e.isDefaultPrevented()){this.isShown=!0,this.$body.addClass("clip"),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),that.$element.parent().length||that.$element.appendTo(that.$body),that.$element.show().scrollTop(0),that.$element.addClass("active").attr("aria-hidden",!1),that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});that.$element.trigger("focus").trigger(e)}},Modal.prototype.hide=function(e){e&&e.preventDefault(),e=$.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("clip"),this.escape(),$(document).off("focusin.bs.modal"),this.$element.removeClass("active").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),this.hideModal())},Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},Modal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",$.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},Modal.prototype.hideModal=function(){var that=this;this.$element.hide(),that.$element.trigger("hidden.bs.modal")};var old=$.fn.modal;$.fn.modal=Plugin,$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());$this.is("a")&&e.preventDefault(),Plugin.call($target,option,this),$target.one("hide",function(){$this.is(":visible")&&$this.trigger("focus")})})}(jQuery),function(){$(function(){$('[data-toggle="offcanvas"]').click(function(){target=$(this).data("target"),$(target).toggleClass("active")}),$('[data-dismiss="offcanvas"]').click(function(){$(this).parent().toggleClass("active")})})}.call(this),function(){$(function(){$('[data-toggle="popup"]').click(function(){$popup=$(this).next(".popup"),$popup.toggleClass("active")}),$('[data-dismiss="popup"]').click(function(){$(this).parent().toggleClass("active")})})}.call(this),+function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tab");data||$this.data("bs.tab",data=new Tab(this)),"string"==typeof option&&data[option]()})}var Tab=function(element){this.element=$(element)};Tab.prototype.show=function(){var $this=this.element,$tabs=$this.parent(),selector=$this.data("target");if(selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),!$this.hasClass("active")){var previous=$tabs.find(".active:last")[0],e=$.Event("show.bs.tab",{relatedTarget:previous});if($this.trigger(e),!e.isDefaultPrevented()){var $target=$(selector);this.activate($this,$tabs),this.activate($target,$target.parent(),function(){$this.trigger({type:"shown.bs.tab",relatedTarget:previous})})}}},Tab.prototype.activate=function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),element.addClass("active"),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu")&&element.closest("li.dropdown").addClass("active"),callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");transition?$active.one($.support.transition.end,next).emulateTransitionEnd(150):next(),$active.removeClass("in")};var old=$.fn.tab;$.fn.tab=Plugin,$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this},$(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),Plugin.call($(this),"show")})}(jQuery),+function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tooltip"),options="object"==typeof option&&option,selector=options&&options.selector;(data||"destroy"!=option)&&(selector?(data||$this.data("bs.tooltip",data={}),data[selector]||(data[selector]=new Tooltip(this,options))):data||$this.data("bs.tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]())})}var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",element,options)};Tooltip.VERSION="3.3.0",Tooltip.TRANSITION_DURATION=150,Tooltip.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},Tooltip.prototype.init=function(type,element,options){this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.$viewport=this.options.viewport&&$(this.options.viewport.selector||this.options.viewport);for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focusin",eventOut="hover"==trigger?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS},Tooltip.prototype.getOptions=function(options){return options=$.extend({},this.getDefaults(),this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},Tooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);return self&&self.$tip&&self.$tip.is(":visible")?void(self.hoverState="in"):(self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),clearTimeout(self.timeout),self.hoverState="in",self.options.delay&&self.options.delay.show?void(self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)):self.show())},Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);return self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),clearTimeout(self.timeout),self.hoverState="out",self.options.delay&&self.options.delay.hide?void(self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)):self.hide()},Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this,$tip=this.tip(),tipId=this.getUID(this.type);this.setContent(),$tip.attr("id",tipId),this.$element.attr("aria-describedby",tipId),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement,$container=this.options.container?$(this.options.container):this.$element.parent(),containerDim=this.getPosition($container);placement="bottom"==placement&&pos.bottom+actualHeight>containerDim.bottom?"top":"top"==placement&&pos.top-actualHeight<containerDim.top?"bottom":"right"==placement&&pos.right+actualWidth>containerDim.width?"left":"left"==placement&&pos.left-actualWidth<containerDim.left?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){var prevHoverState=that.hoverState;that.$element.trigger("shown.bs."+that.type),that.hoverState=null,"out"==prevHoverState&&that.leave(that)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()}},Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top=offset.top+marginTop,offset.left=offset.left+marginLeft,$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0),$tip.addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;"top"==placement&&actualHeight!=height&&(offset.top=offset.top+height-actualHeight);var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);delta.left?offset.left+=delta.left:offset.top+=delta.top;var isVertical=/top|bottom/.test(placement),arrowDelta=isVertical?2*delta.left-width+actualWidth:2*delta.top-height+actualHeight,arrowOffsetPosition=isVertical?"offsetWidth":"offsetHeight";$tip.offset(offset),this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],isVertical)},Tooltip.prototype.replaceArrow=function(delta,dimension,isHorizontal){this.arrow().css(isHorizontal?"left":"top",50*(1-delta/dimension)+"%").css(isHorizontal?"top":"left","")},Tooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},Tooltip.prototype.hide=function(callback){function complete(){"in"!=that.hoverState&&$tip.detach(),that.$element.removeAttr("aria-describedby").trigger("hidden.bs."+that.type),callback&&callback()}var that=this,$tip=this.tip(),e=$.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:($tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete(),this.hoverState=null,this)},Tooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},Tooltip.prototype.hasContent=function(){return this.getTitle()},Tooltip.prototype.getPosition=function($element){$element=$element||this.$element;var el=$element[0],isBody="BODY"==el.tagName,elRect=el.getBoundingClientRect();null==elRect.width&&(elRect=$.extend({},elRect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top}));var elOffset=isBody?{top:0,left:0}:$element.offset(),scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop()},outerDims=isBody?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},elRect,scroll,outerDims,elOffset)},Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0,viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll,bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;topEdgeOffset<viewportDimensions.top?delta.top=viewportDimensions.top-topEdgeOffset:bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height&&(delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset)}else{var leftEdgeOffset=pos.left-viewportPadding,rightEdgeOffset=pos.left+viewportPadding+actualWidth;leftEdgeOffset<viewportDimensions.left?delta.left=viewportDimensions.left-leftEdgeOffset:rightEdgeOffset>viewportDimensions.width&&(delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset)}return delta},Tooltip.prototype.getTitle=function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},Tooltip.prototype.getUID=function(prefix){do prefix+=~~(1e6*Math.random());while(document.getElementById(prefix));return prefix},Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)},Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},Tooltip.prototype.enable=function(){this.enabled=!0},Tooltip.prototype.disable=function(){this.enabled=!1},Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},Tooltip.prototype.toggle=function(e){var self=this;e&&(self=$(e.currentTarget).data("bs."+this.type),self||(self=new this.constructor(e.currentTarget,this.getDelegateOptions()),$(e.currentTarget).data("bs."+this.type,self))),self.tip().hasClass("in")?self.leave(self):self.enter(self)},Tooltip.prototype.destroy=function(){var that=this;clearTimeout(this.timeout),this.hide(function(){that.$element.off("."+that.type).removeData("bs."+that.type)})};var old=$.fn.tooltip;$.fn.tooltip=Plugin,$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(jQuery),+function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return{end:transEndEventNames[name]};return!1}$.fn.emulateTransitionEnd=function(duration){var called=!1,$el=this;$(this).one($.support.transition.end,function(){called=!0});var callback=function(){called||$($el).trigger($.support.transition.end)};return setTimeout(callback,duration),this},$(function(){$.support.transition=transitionEnd()})}(jQuery),function($){var VERSION="0.9.3",utils={isMsie:function(){var match=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return match?parseInt(match[2],10):!1},isBlankString:function(str){return!str||/^\s*$/.test(str)},escapeRegExChars:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(obj){return"string"==typeof obj},isNumber:function(obj){return"number"==typeof obj},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(obj){return"undefined"==typeof obj},bind:$.proxy,bindAll:function(obj){var val;for(var key in obj)$.isFunction(val=obj[key])&&(obj[key]=$.proxy(val,obj))},indexOf:function(haystack,needle){for(var i=0;i<haystack.length;i++)if(haystack[i]===needle)return i;return-1},each:$.each,map:$.map,filter:$.grep,every:function(obj,test){var result=!0;return obj?($.each(obj,function(key,val){return(result=test.call(null,val,key,obj))?void 0:!1}),!!result):result},some:function(obj,test){var result=!1;return obj?($.each(obj,function(key,val){return(result=test.call(null,val,key,obj))?!1:void 0}),!!result):result},mixin:$.extend,getUniqueId:function(){var counter=0;return function(){return counter++}}(),defer:function(fn){setTimeout(fn,0)},debounce:function(func,wait,immediate){var timeout,result;return function(){var later,callNow,context=this,args=arguments;return later=function(){timeout=null,immediate||(result=func.apply(context,args))},callNow=immediate&&!timeout,clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&(result=func.apply(context,args)),result}},throttle:function(func,wait){var context,args,timeout,result,previous,later;return previous=0,later=function(){previous=new Date,timeout=null,result=func.apply(context,args)},function(){var now=new Date,remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||(timeout=setTimeout(later,remaining)),result}},tokenizeQuery:function(str){return $.trim(str).toLowerCase().split(/[\s]+/)},tokenizeText:function(str){return $.trim(str).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},EventTarget=function(){var eventSplitter=/\s+/;return{on:function(events,callback){var event;if(!callback)return this;for(this._callbacks=this._callbacks||{},events=events.split(eventSplitter);event=events.shift();)this._callbacks[event]=this._callbacks[event]||[],this._callbacks[event].push(callback);return this},trigger:function(events,data){var event,callbacks;if(!this._callbacks)return this;for(events=events.split(eventSplitter);event=events.shift();)if(callbacks=this._callbacks[event])for(var i=0;i<callbacks.length;i+=1)callbacks[i].call(this,{type:event,data:data});return this}}}(),EventBus=function(){function EventBus(o){o&&o.el||$.error("EventBus initialized without el"),this.$el=$(o.el)}var namespace="typeahead:";return utils.mixin(EventBus.prototype,{trigger:function(type){var args=[].slice.call(arguments,1);this.$el.trigger(namespace+type,args)}}),EventBus}(),PersistentStorage=function(){function PersistentStorage(namespace){this.prefix=["__",namespace,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function now(){return(new Date).getTime()}function encode(val){return JSON.stringify(utils.isUndefined(val)?null:val)}function decode(val){return JSON.parse(val)}var ls,methods;try{ls=window.localStorage,ls.setItem("~~~","!"),ls.removeItem("~~~")}catch(err){ls=null}return methods=ls&&window.JSON?{_prefix:function(key){return this.prefix+key},_ttlKey:function(key){return this._prefix(key)+this.ttlKey},get:function(key){return this.isExpired(key)&&this.remove(key),decode(ls.getItem(this._prefix(key)))},set:function(key,val,ttl){return utils.isNumber(ttl)?ls.setItem(this._ttlKey(key),encode(now()+ttl)):ls.removeItem(this._ttlKey(key)),ls.setItem(this._prefix(key),encode(val))},remove:function(key){return ls.removeItem(this._ttlKey(key)),ls.removeItem(this._prefix(key)),this},clear:function(){var i,key,keys=[],len=ls.length;for(i=0;len>i;i++)(key=ls.key(i)).match(this.keyMatcher)&&keys.push(key.replace(this.keyMatcher,""));for(i=keys.length;i--;)this.remove(keys[i]);return this},isExpired:function(key){var ttl=decode(ls.getItem(this._ttlKey(key)));return utils.isNumber(ttl)&&now()>ttl?!0:!1
}}:{get:utils.noop,set:utils.noop,remove:utils.noop,clear:utils.noop,isExpired:utils.noop},utils.mixin(PersistentStorage.prototype,methods),PersistentStorage}(),RequestCache=function(){function RequestCache(o){utils.bindAll(this),o=o||{},this.sizeLimit=o.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return utils.mixin(RequestCache.prototype,{get:function(url){return this.cache[url]},set:function(url,resp){var requestToEvict;this.cachedKeysByAge.length===this.sizeLimit&&(requestToEvict=this.cachedKeysByAge.shift(),delete this.cache[requestToEvict]),this.cache[url]=resp,this.cachedKeysByAge.push(url)}}),RequestCache}(),Transport=function(){function Transport(o){utils.bindAll(this),o=utils.isString(o)?{url:o}:o,requestCache=requestCache||new RequestCache,maxPendingRequests=utils.isNumber(o.maxParallelRequests)?o.maxParallelRequests:maxPendingRequests||6,this.url=o.url,this.wildcard=o.wildcard||"%QUERY",this.filter=o.filter,this.replace=o.replace,this.ajaxSettings={type:"get",cache:o.cache,timeout:o.timeout,dataType:o.dataType||"json",beforeSend:o.beforeSend},this._get=(/^throttle$/i.test(o.rateLimitFn)?utils.throttle:utils.debounce)(this._get,o.rateLimitWait||300)}function incrementPendingRequests(){pendingRequestsCount++}function decrementPendingRequests(){pendingRequestsCount--}function belowPendingRequestsThreshold(){return maxPendingRequests>pendingRequestsCount}var maxPendingRequests,requestCache,pendingRequestsCount=0,pendingRequests={};return utils.mixin(Transport.prototype,{_get:function(url,cb){function done(resp){var data=that.filter?that.filter(resp):resp;cb&&cb(data),requestCache.set(url,resp)}var that=this;belowPendingRequestsThreshold()?this._sendRequest(url).done(done):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(url){function always(){decrementPendingRequests(),pendingRequests[url]=null,that.onDeckRequestArgs&&(that._get.apply(that,that.onDeckRequestArgs),that.onDeckRequestArgs=null)}var that=this,jqXhr=pendingRequests[url];return jqXhr||(incrementPendingRequests(),jqXhr=pendingRequests[url]=$.ajax(url,this.ajaxSettings).always(always)),jqXhr},get:function(query,cb){var url,resp,that=this,encodedQuery=encodeURIComponent(query||"");return cb=cb||utils.noop,url=this.replace?this.replace(this.url,encodedQuery):this.url.replace(this.wildcard,encodedQuery),(resp=requestCache.get(url))?utils.defer(function(){cb(that.filter?that.filter(resp):resp)}):this._get(url,cb),!!resp}}),Transport}(),Dataset=function(){function Dataset(o){utils.bindAll(this),utils.isString(o.template)&&!o.engine&&$.error("no template engine specified"),o.local||o.prefetch||o.remote||$.error("one of local, prefetch, or remote is required"),this.name=o.name||utils.getUniqueId(),this.limit=o.limit||5,this.minLength=o.minLength||1,this.header=o.header,this.footer=o.footer,this.valueKey=o.valueKey||"value",this.template=compileTemplate(o.template,o.engine,this.valueKey),this.local=o.local,this.prefetch=o.prefetch,this.remote=o.remote,this.itemHash={},this.adjacencyList={},this.storage=o.name?new PersistentStorage(o.name):null}function compileTemplate(template,engine,valueKey){var renderFn,compiledTemplate;return utils.isFunction(template)?renderFn=template:utils.isString(template)?(compiledTemplate=engine.compile(template),renderFn=utils.bind(compiledTemplate.render,compiledTemplate)):renderFn=function(context){return"<p>"+context[valueKey]+"</p>"},renderFn}var keys={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};return utils.mixin(Dataset.prototype,{_processLocalData:function(data){this._mergeProcessedData(this._processData(data))},_loadPrefetchData:function(o){function processPrefetchData(data){var filteredData=o.filter?o.filter(data):data,processedData=that._processData(filteredData),itemHash=processedData.itemHash,adjacencyList=processedData.adjacencyList;that.storage&&(that.storage.set(keys.itemHash,itemHash,o.ttl),that.storage.set(keys.adjacencyList,adjacencyList,o.ttl),that.storage.set(keys.thumbprint,thumbprint,o.ttl),that.storage.set(keys.protocol,utils.getProtocol(),o.ttl)),that._mergeProcessedData(processedData)}var storedThumbprint,storedProtocol,storedItemHash,storedAdjacencyList,isExpired,deferred,that=this,thumbprint=VERSION+(o.thumbprint||"");return this.storage&&(storedThumbprint=this.storage.get(keys.thumbprint),storedProtocol=this.storage.get(keys.protocol),storedItemHash=this.storage.get(keys.itemHash),storedAdjacencyList=this.storage.get(keys.adjacencyList)),isExpired=storedThumbprint!==thumbprint||storedProtocol!==utils.getProtocol(),o=utils.isString(o)?{url:o}:o,o.ttl=utils.isNumber(o.ttl)?o.ttl:864e5,storedItemHash&&storedAdjacencyList&&!isExpired?(this._mergeProcessedData({itemHash:storedItemHash,adjacencyList:storedAdjacencyList}),deferred=$.Deferred().resolve()):deferred=$.getJSON(o.url).done(processPrefetchData),deferred},_transformDatum:function(datum){var value=utils.isString(datum)?datum:datum[this.valueKey],tokens=datum.tokens||utils.tokenizeText(value),item={value:value,tokens:tokens};return utils.isString(datum)?(item.datum={},item.datum[this.valueKey]=datum):item.datum=datum,item.tokens=utils.filter(item.tokens,function(token){return!utils.isBlankString(token)}),item.tokens=utils.map(item.tokens,function(token){return token.toLowerCase()}),item},_processData:function(data){var that=this,itemHash={},adjacencyList={};return utils.each(data,function(i,datum){var item=that._transformDatum(datum),id=utils.getUniqueId(item.value);itemHash[id]=item,utils.each(item.tokens,function(i,token){var character=token.charAt(0),adjacency=adjacencyList[character]||(adjacencyList[character]=[id]);!~utils.indexOf(adjacency,id)&&adjacency.push(id)})}),{itemHash:itemHash,adjacencyList:adjacencyList}},_mergeProcessedData:function(processedData){var that=this;utils.mixin(this.itemHash,processedData.itemHash),utils.each(processedData.adjacencyList,function(character,adjacency){var masterAdjacency=that.adjacencyList[character];that.adjacencyList[character]=masterAdjacency?masterAdjacency.concat(adjacency):adjacency})},_getLocalSuggestions:function(terms){var shortestList,that=this,firstChars=[],lists=[],suggestions=[];return utils.each(terms,function(i,term){var firstChar=term.charAt(0);!~utils.indexOf(firstChars,firstChar)&&firstChars.push(firstChar)}),utils.each(firstChars,function(i,firstChar){var list=that.adjacencyList[firstChar];return list?(lists.push(list),void((!shortestList||list.length<shortestList.length)&&(shortestList=list))):!1}),lists.length<firstChars.length?[]:(utils.each(shortestList,function(i,id){var isCandidate,isMatch,item=that.itemHash[id];isCandidate=utils.every(lists,function(list){return~utils.indexOf(list,id)}),isMatch=isCandidate&&utils.every(terms,function(term){return utils.some(item.tokens,function(token){return 0===token.indexOf(term)})}),isMatch&&suggestions.push(item)}),suggestions)},initialize:function(){var deferred;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new Transport(this.remote):null,deferred=this.prefetch?this._loadPrefetchData(this.prefetch):$.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return deferred},deferred},getSuggestions:function(query,cb){function processRemoteData(data){suggestions=suggestions.slice(0),utils.each(data,function(i,datum){var isDuplicate,item=that._transformDatum(datum);return isDuplicate=utils.some(suggestions,function(suggestion){return item.value===suggestion.value}),!isDuplicate&&suggestions.push(item),suggestions.length<that.limit}),cb&&cb(suggestions)}var terms,suggestions,that=this,cacheHit=!1;query.length<this.minLength||(terms=utils.tokenizeQuery(query),suggestions=this._getLocalSuggestions(terms).slice(0,this.limit),suggestions.length<this.limit&&this.transport&&(cacheHit=this.transport.get(query,processRemoteData)),!cacheHit&&cb&&cb(suggestions))}}),Dataset}(),InputView=function(){function InputView(o){var that=this;utils.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=$(o.hint),this.$input=$(o.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),utils.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function($e){that.specialKeyCodeMap[$e.which||$e.keyCode]||utils.defer(that._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=buildOverflowHelper(this.$input)}function buildOverflowHelper($input){return $("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:$input.css("font-family"),fontSize:$input.css("font-size"),fontStyle:$input.css("font-style"),fontVariant:$input.css("font-variant"),fontWeight:$input.css("font-weight"),wordSpacing:$input.css("word-spacing"),letterSpacing:$input.css("letter-spacing"),textIndent:$input.css("text-indent"),textRendering:$input.css("text-rendering"),textTransform:$input.css("text-transform")}).insertAfter($input)}function compareQueries(a,b){return a=(a||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),b=(b||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),a===b}return utils.mixin(InputView.prototype,EventTarget,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function($e){var keyName=this.specialKeyCodeMap[$e.which||$e.keyCode];keyName&&this.trigger(keyName+"Keyed",$e)},_compareQueryToInputValue:function(){var inputValue=this.getInputValue(),isSameQuery=compareQueries(this.query,inputValue),isSameQueryExceptWhitespace=isSameQuery?this.query.length!==inputValue.length:!1;isSameQueryExceptWhitespace?this.trigger("whitespaceChanged",{value:this.query}):isSameQuery||this.trigger("queryChanged",{value:this.query=inputValue})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(query){this.query=query},getInputValue:function(){return this.$input.val()},setInputValue:function(value,silent){this.$input.val(value),!silent&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(value){this.$hint.val(value)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var range,valueLength=this.$input.val().length,selectionStart=this.$input[0].selectionStart;return utils.isNumber(selectionStart)?selectionStart===valueLength:document.selection?(range=document.selection.createRange(),range.moveStart("character",-valueLength),valueLength===range.text.length):!0}}),InputView}(),DropdownView=function(){function DropdownView(o){utils.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.$menu=$(o.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function extractSuggestion($el){return $el.data("suggestion")}var html={suggestionsList:'<span class="tt-suggestions"></span>'},css={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};return utils.mixin(DropdownView.prototype,EventTarget,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function($e){var $suggestion=$($e.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),$suggestion.addClass("tt-is-under-cursor")},_handleSelection:function($e){var $suggestion=$($e.currentTarget);this.trigger("suggestionSelected",extractSuggestion($suggestion))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(increment){var $suggestions,$cur,nextIndex,$underCursor;if(this.isVisible()){if($suggestions=this._getSuggestions(),$cur=$suggestions.filter(".tt-is-under-cursor"),$cur.removeClass("tt-is-under-cursor"),nextIndex=$suggestions.index($cur)+increment,nextIndex=(nextIndex+1)%($suggestions.length+1)-1,-1===nextIndex)return void this.trigger("cursorRemoved");-1>nextIndex&&(nextIndex=$suggestions.length-1),$underCursor=$suggestions.eq(nextIndex).addClass("tt-is-under-cursor"),this._ensureVisibility($underCursor),this.trigger("cursorMoved",extractSuggestion($underCursor))}},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function($el){var menuHeight=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),menuScrollTop=this.$menu.scrollTop(),elTop=$el.position().top,elBottom=elTop+$el.outerHeight(!0);0>elTop?this.$menu.scrollTop(menuScrollTop+elTop):elBottom>menuHeight&&this.$menu.scrollTop(menuScrollTop+(elBottom-menuHeight))},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this.isMouseOverDropdown=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(dir){var ltrCss={left:"0",right:"auto"},rtlCss={left:"auto",right:" 0"};this.$menu.css("ltr"===dir?ltrCss:rtlCss)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var $suggestion=this._getSuggestions().filter(".tt-is-under-cursor").first();return $suggestion.length>0?extractSuggestion($suggestion):null},getFirstSuggestion:function(){var $suggestion=this._getSuggestions().first();return $suggestion.length>0?extractSuggestion($suggestion):null},renderSuggestions:function(dataset,suggestions){var compiledHtml,$suggestionsList,elBuilder,fragment,$el,datasetClassName="tt-dataset-"+dataset.name,wrapper='<div class="tt-suggestion pad0y pad1x">%body</div>',$dataset=this.$menu.find("."+datasetClassName);0===$dataset.length&&($suggestionsList=$(html.suggestionsList).css(css.suggestionsList),$dataset=$("<div></div>").addClass(datasetClassName).append(dataset.header).append($suggestionsList).append(dataset.footer).appendTo(this.$menu.children(".tt-dropdown-menu-content"))),suggestions.length>0?(this.isEmpty=!1,this.isOpen&&this._show(),elBuilder=document.createElement("div"),fragment=document.createDocumentFragment(),utils.each(suggestions,function(i,suggestion){suggestion.dataset=dataset.name,compiledHtml=dataset.template(suggestion.datum),elBuilder.innerHTML=wrapper.replace("%body",compiledHtml),$el=$(elBuilder.firstChild).css(css.suggestion).data("suggestion",suggestion),$el.children().each(function(){$(this).css(css.suggestionChild)}),fragment.appendChild($el[0])}),$dataset.show().find(".tt-suggestions").html(fragment)):this.clearSuggestions(dataset.name),this.trigger("suggestionsRendered")},clearSuggestions:function(datasetName){var $datasets=this.$menu.find(datasetName?".tt-dataset-"+datasetName:'[class^="tt-dataset-"]'),$suggestions=$datasets.find(".tt-suggestions");$datasets.hide(),$suggestions.empty(),0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}}),DropdownView}(),TypeaheadView=function(){function TypeaheadView(o){var $menu,$input,$hint;utils.bindAll(this),this.$node=buildDomStructure(o.input),this.datasets=o.datasets,this.dir=null,this.eventBus=o.eventBus,$menu=this.$node.find(".tt-dropdown-menu"),$input=this.$node.find(".tt-query"),$hint=this.$node.find(".tt-hint"),this.dropdownView=new DropdownView({menu:$menu}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=new InputView({input:$input,hint:$hint}).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}function buildDomStructure(input){var $wrapper=$(html.wrapper),$dropdown=$(html.dropdown),$input=$(input),$hint=$(html.hint),$content=$dropdown.children(".tt-dropdown-menu-content"),$dark=$input.closest(".dark");$wrapper=$wrapper.css(css.wrapper),$dropdown=$dropdown.css(css.dropdown),$hint.css(css.hint),$input.data("ttAttrs",{dir:$input.attr("dir"),autocomplete:$input.attr("autocomplete"),spellcheck:$input.attr("spellcheck"),style:$input.attr("style")}),$input.addClass("tt-query contain").attr({autocomplete:"off",spellcheck:!1}).css(css.query);try{!$input.attr("dir")&&$input.attr("dir","auto")}catch(e){}return $dark.length&&($dropdown.removeClass("fill-white").addClass("fill-denim"),$content.addClass("fill-darken1")),$input.wrap($wrapper).parent().prepend($hint).append($dropdown)}function destroyDomStructure($node){var $input=$node.find(".tt-query");utils.each($input.data("ttAttrs"),function(key,val){utils.isUndefined(val)?$input.removeAttr(key):$input.attr(key,val)}),$input.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter($node),$node.remove()}var html={wrapper:'<span class="twitter-typeahead col-xs-12"></span>',hint:'<input class="tt-hint pin-topleft" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu col-xs-12 round keyline-all fill-white"><span class="tt-dropdown-menu-content pad0y block"></span></span>'},css={wrapper:{},hint:{background:"transparent",border:"none"},query:{},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return utils.isMsie()&&utils.mixin(css.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),utils.isMsie()&&utils.isMsie()<=7&&(utils.mixin(css.wrapper,{display:"inline",zoom:"1"}),utils.mixin(css.query,{marginTop:"-1px"})),utils.mixin(TypeaheadView.prototype,EventTarget,{_managePreventDefault:function(e){var hint,inputValue,$e=e.data,preventDefault=!1;switch(e.type){case"tabKeyed":hint=this.inputView.getHintValue(),inputValue=this.inputView.getInputValue(),preventDefault=hint&&hint!==inputValue;break;case"upKeyed":case"downKeyed":preventDefault=!$e.shiftKey&&!$e.ctrlKey&&!$e.metaKey}preventDefault&&$e.preventDefault()},_setLanguageDirection:function(){var dir=this.inputView.getLanguageDirection();dir!==this.dir&&(this.dir=dir,this.$node.css("direction",dir),this.dropdownView.setLanguageDirection(dir))},_updateHint:function(){var inputValue,query,escapedQuery,beginsWithQuery,match,suggestion=this.dropdownView.getFirstSuggestion(),hint=suggestion?suggestion.value:null,dropdownIsVisible=this.dropdownView.isVisible(),inputHasOverflow=this.inputView.isOverflow();hint&&dropdownIsVisible&&!inputHasOverflow&&(inputValue=this.inputView.getInputValue(),query=inputValue.replace(/\s{2,}/g," ").replace(/^\s+/g,""),escapedQuery=utils.escapeRegExChars(query),beginsWithQuery=new RegExp("^(?:"+escapedQuery+")(.*$)","i"),match=beginsWithQuery.exec(hint),this.inputView.setHintValue(inputValue+(match?match[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(e){var suggestion=e.data;this.inputView.setInputValue(suggestion.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(e){this.dropdownView["blured"===e.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(e){var $e=e.data;$e.shiftKey||$e.ctrlKey||$e.metaKey||this.dropdownView["upKeyed"===e.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(e){var byClick="suggestionSelected"===e.type,suggestion=byClick?e.data:this.dropdownView.getSuggestionUnderCursor();suggestion&&(this.inputView.setInputValue(suggestion.value),byClick?this.inputView.focus():e.data.preventDefault(),byClick&&utils.isMsie()?utils.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",suggestion.datum,suggestion.dataset))},_getSuggestions:function(){var that=this,query=this.inputView.getQuery();utils.isBlankString(query)||utils.each(this.datasets,function(i,dataset){dataset.getSuggestions(query,function(suggestions){query===that.inputView.getQuery()&&that.dropdownView.renderSuggestions(dataset,suggestions)})})},_autocomplete:function(e){var isCursorAtEnd,ignoreEvent,query,hint,suggestion;("rightKeyed"!==e.type&&"leftKeyed"!==e.type||(isCursorAtEnd=this.inputView.isCursorAtEnd(),ignoreEvent="ltr"===this.inputView.getLanguageDirection()?"leftKeyed"===e.type:"rightKeyed"===e.type,isCursorAtEnd&&!ignoreEvent))&&(query=this.inputView.getQuery(),hint=this.inputView.getHintValue(),""!==hint&&query!==hint&&(suggestion=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(suggestion.value),this.eventBus.trigger("autocompleted",suggestion.datum,suggestion.dataset)))},_propagateEvent:function(e){this.eventBus.trigger(e.type)},destroy:function(){this.inputView.destroy(),this.dropdownView.destroy(),destroyDomStructure(this.$node),this.$node=null},setQuery:function(query){this.inputView.setQuery(query),this.inputView.setInputValue(query),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),TypeaheadView}();!function(){var methods,cache={},viewKey="ttView";methods={initialize:function(datasetDefs){function initialize(){var deferreds,$input=$(this),eventBus=new EventBus({el:$input});deferreds=utils.map(datasets,function(dataset){return dataset.initialize()}),$input.data(viewKey,new TypeaheadView({input:$input,eventBus:eventBus=new EventBus({el:$input}),datasets:datasets})),$.when.apply($,deferreds).always(function(){utils.defer(function(){eventBus.trigger("initialized")})})}var datasets;return datasetDefs=utils.isArray(datasetDefs)?datasetDefs:[datasetDefs],0===datasetDefs.length&&$.error("no datasets provided"),datasets=utils.map(datasetDefs,function(o){var dataset=cache[o.name]?cache[o.name]:new Dataset(o);return o.name&&(cache[o.name]=dataset),dataset}),this.each(initialize)},destroy:function(){function destroy(){var $this=$(this),view=$this.data(viewKey);view&&(view.destroy(),$this.removeData(viewKey))}return this.each(destroy)},setQuery:function(query){function setQuery(){var view=$(this).data(viewKey);view&&view.setQuery(query)}return this.each(setQuery)}},jQuery.fn.typeahead=function(method){return methods[method]?methods[method].apply(this,[].slice.call(arguments,1)):methods.initialize.apply(this,arguments)}}()}(window.jQuery);